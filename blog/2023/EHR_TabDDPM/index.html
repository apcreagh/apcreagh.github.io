<!DOCTYPE html>
<!-- _layouts/distill.html -->
<html>
  <head><!-- Metadata, OpenGraph and Schema.org -->


    <!-- Standard metadata -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Generating synthetic electronic health record (EHR) data using denoising diffusion probabilistic models | Andrew P. Creagh</title>
    <meta name="author" content="Andrew P. Creagh" />
    <meta name="description" content="Our recent work on 'Synthesizing Mixed-type Electronic Health Records using Diffusion Models' is now available on arXiv! ðŸ“¢" />

<!-- Bootstrap & MDB -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous" />

<!-- Fonts & Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons">

<!-- Code Syntax Highlighting -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light" />

<!-- Styles -->

<link rel="stylesheet" href="/assets/css/main.css">
<link rel="canonical" href="https://apcreagh.github.io/blog/2023/EHR_TabDDPM/">

<!-- Dark Mode -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark" />

<script src="/assets/js/theme.js"></script>
<script src="/assets/js/dark_mode.js"></script>


    <!-- jQuery -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

    <!-- MathJax -->
<script type="text/javascript">
  window.MathJax = {
    tex: {
      tags: 'ams'
    }
  };
</script>
<script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script>
<script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>

    <!-- Distill js -->
    <script src="/assets/js/distillpub/template.v2.js"></script>
    <script src="/assets/js/distillpub/transforms.v2.js"></script>
    <script src="/assets/js/distillpub/overrides.js"></script>
    
    <!-- Page/Post style -->
    <style type="text/css">
      .fake-img {
  background: #ffffff;
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 0px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
} .fake-img p {
  font-family: monospace;
  color: white;
  text-align: left;
  margin: 12px 0;
  text-align: left;
  font-size: 14px;
  margin-bottom: 20px;
} .fake-img figcaption {
    text-align: justify;
    margin-bottom: 20px;
} figure {
    display: inline-block;
    margin: 5px; /* adjust as needed */
} figure img {
    vertical-align: middle;
    margin-bottom: 12px;
} figure figcaption {
    text-align: justify;
    margin-bottom: 20px;
}

    </style>
  </head>

  <d-front-matter>
    <script async type="text/json">{
      "title": "Generating synthetic electronic health record (EHR) data using denoising diffusion probabilistic models",
      "description": "Our recent work on 'Synthesizing Mixed-type Electronic Health Records using Diffusion Models' is now available on arXiv! ðŸ“¢",
      "published": "March 1, 2023",
      "authors": [
        {
          "author": "Taha Ceritli",
          "authorURL": "https://tahaceritli.github.io/",
          "affiliations": [
            {
              "name": "IBME, University of Oxford.",
              "url": ""
            }
          ]
        },
        {
          "author": "Ghadeer O. Ghosheh",
          "authorURL": "https://eng.ox.ac.uk/people/ghadeer-ghosheh/",
          "affiliations": [
            {
              "name": "IBME, University of Oxford.",
              "url": ""
            }
          ]
        },
        {
          "author": "Vinod Kumar Chauhan",
          "authorURL": "https://sites.google.com/site/jmdvinodjmd/",
          "affiliations": [
            {
              "name": "IBME, University of Oxford.",
              "url": ""
            }
          ]
        },
        {
          "author": "Tingting Zhu",
          "authorURL": "https://ibme.ox.ac.uk/people/tingting-zhu/",
          "affiliations": [
            {
              "name": "IBME, University of Oxford.",
              "url": ""
            }
          ]
        },
        {
          "author": "Andrew P. Creagh",
          "authorURL": "https://www.andrewcreagh.com",
          "affiliations": [
            {
              "name": "IBME, BDI,<br>University of Oxford.",
              "url": ""
            }
          ]
        },
        {
          "author": "David A. Clifton",
          "authorURL": "https://ibme.ox.ac.uk/people/david-clifton/",
          "affiliations": [
            {
              "name": "IBME, University of Oxford.",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script>
  </d-front-matter>

  <body class="fixed-top-nav">

    <!-- Header -->
    <header>

      <!-- Nav Bar -->
      <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top">
        <div class="container">
          <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">AndrewÂ </span>P.Â Creagh</a>
          <!-- Navbar Toggle -->
          <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar top-bar"></span>
            <span class="icon-bar middle-bar"></span>
            <span class="icon-bar bottom-bar"></span>
          </button>

          <div class="collapse navbar-collapse text-right" id="navbarNav">
            <ul class="navbar-nav ml-auto flex-nowrap">

              <!-- About -->
              <li class="nav-item ">
                <a class="nav-link" href="/">about</a>
              </li>
              
              <!-- Blog -->
              <li class="nav-item active">
                <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a>
              </li>

              <!-- Other pages -->
              <li class="nav-item ">
                <a class="nav-link" href="/publications/">publications</a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/teaching/">teaching</a>
              </li>

              <!-- Toogle theme mode -->
              <li class="toggle-container">
                <button id="light-toggle" title="Change theme">
                  <i class="fas fa-moon"></i>
                  <i class="fas fa-sun"></i>
                </button>
              </li>
            </ul>
          </div>
        </div>
      </nav>

    </header>

    <!-- Content -->
    <div class="post distill">

      <d-title>
        <h1>Generating synthetic electronic health record (EHR) data using denoising diffusion probabilistic models</h1>
        <p>Our recent work on 'Synthesizing Mixed-type Electronic Health Records using Diffusion Models' is now available on arXiv! ðŸ“¢</p>
      </d-title>

      <d-byline></d-byline>

      <d-article>
        <d-contents>
          <nav class="l-text figcaption">
          <h3>Contents</h3>
            <div><a href="#challenge">Challenge</a></div>
            <div><a href="#solution">Solution</a></div>
            <div><a href="#"></a></div>
            <ul>
              <li><a href="#denoising-diffusion-probabilistic-models-ddpms">Denoising Diffusion Probabilistic Models (DDPMs)</a></li>
              
            </ul>
<div><a href="#evaluation">Evaluation</a></div>
            <div><a href="#feedback">Feedback</a></div>
            <div><a href="#reference">Reference</a></div>
            
          </nav>
        </d-contents>

        <p><a href="https://arxiv.org/abs/2302.14679" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/6.x/svgs/regular/window-maximize.svg" width="50" height="50"></a>
<a href="https://arxiv.org/pdf/2302.14679.pdf" target="_blank" rel="noopener noreferrer"><img src="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/6.x/svgs/regular/file-pdf.svg" width="50" height="50"></a><br>
<b>Note:</b> This article is best viewed in â€˜light modeâ€™!  <img src="https://raw.githubusercontent.com/FortAwesome/Font-Awesome/6.x/svgs/regular/sun.svg" width="20" height="20"></p>

<h2 id="challenge">Challenge</h2>
<p>The latest advances in machine learning and artificial intelligence (AI/ML) has opened up new possibilities to improve healthcare outcomes by harnessing the large volumes of data contained in electronic health records (EHRs). However, due to the sensitive nature of the information contained in EHRs, strict data sharing requirements and the need to preserve patient privacy has hindered the development and deployment of AI/ML models across healthcare settings.</p>

<h2 id="solution">Solution</h2>
<p>Generating synthetic patient data, instead, offers a promising solution to mitigate these risks, although creating realistic data is often very tricky and still an open challenge. In our recent work, led by <a href="https://eng.ox.ac.uk/people/taha-ceritli/" target="_blank" rel="noopener noreferrer">Dr. Taha Ceritli</a>, we have explored how a new state-of-the-art type of generative model, known as Denoising Diffusion Probabilistic Models (DDPMs), could generate more realistic synthetic EHR data beyond existing techniqus, such as well-known Generative Adversarial Networks (GANs).</p>

<div class="fake-img l-page">
  <img src="/assets/img/diffusion_pipeline.png" width="1050"> 
  <figcaption><br><b>An overview of the TabDDPM pipeline</b>: step (1) demonstrates the synthetic data generation process, followed by step (2) where the synthetic data is evaluated based on quality, privacy, utility, and augmentation performance.</figcaption>
</div>

<h3 id="denoising-diffusion-probabilistic-models-ddpms">Denoising Diffusion Probabilistic Models (DDPMs)</h3>
<p>Diffusion models are inspired by non-equilibrium thermodynamics, and they learn to generate synthetic data through denoising. Learning by denoising consists of two processes, forwards and reverse, each of which is a Markov Chain:</p>

<h4 id="forward-process">Forward process</h4>
<p>In the forward process, random noise is added to the orginal data in a series of time steps \((t_1, t_2, \ldots, t_n)\), following \(q(\mathbf{x}_t|\mathbf{x}_{t-1})\), where \(q(\cdot)\) is a Markovian process that produces the corrupted samples at each \(t\). Samples at each time step are drawn from a Gaussian distribution, where the mean of the distribution is conditioned on the sample at the previous time step, and the variance of the distribution follows a fixed schedule. At the end of the forward process, the samples become pure noise.</p>

<h4 id="reverse-process">Reverse process</h4>
<p>During the reverse process, we try to remove the added noise at every time step, beginning with the pure noise distribution (the last step of the forward process). During the reverse process we can only approximate \(q(\mathbf{x}_{tâˆ’1}|\mathbf{x}_t)\), which we do using the conditional probabilities \(p_{\theta}(\mathbf{x}_{tâˆ’1}|\mathbf{x}_t)\), as estimated from our neural network. We then try to denoise each sample backwards from \((t_n, t_{n-1}, \ldots, t_1)\) to the original data.</p>

<h2 id="evaluation">Evaluation</h2>
<p>Our diffusion model, known as <b>TabDDPM</b> due to its flexibility incorporating tabular- and mixed-type data, was compared on four evaluation criteria:</p>
<ol>
  <li>
<b>Data quality</b>: can similar and comparable data be generated?</li>
  <li>
<b>Data privacy</b>: Can the the privacy of original patients be preserved?</li>
  <li>
<b>Data utility</b>: Can synthesized data be useful for downstream predictive models?</li>
  <li>
<b>Data augmentation</b>: Can combining original and synthetic data strengthen the capacity of downstream predictive models?</li>
</ol>

<p>We found that TabDDPM outperformed many of the state-of-the-art methods on benchmark datasets, except for privacy, highlighting the difficult balance that needs to be maintained when synthesizing EHR. Our the abilty to generate more realistic clinical data comes with the cost of too closly mimicing the unique and confidential characteristics of the original patients.</p>

<p>Weâ€™re not there yet, but we hope that our promising results motivates future work exploring how diffusion models could generate realistic healthcare data, without compromising on the privacy considerations of patients.</p>

<h2 id="feedback">Feedback</h2>
<p>This project is still evolving and we welcome any feedback. If you have comments or suggestions, feel free to reach out to myself or <a href="mailto:taha.ceritli@eng.ox.ac.uk">Dr. Taha Ceritli</a>. 
Congratulations to all co-authors, Taha Ceritli, Ghadeer Ghosheh, Vinod Kumar Chauhan, Tingting Zhu and David Clifton.</p>

<h2 id="reference">Reference</h2>
<p>If you use our work, please consider citing:</p>

<div class="language-tex highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@article<span class="p">{</span>ceritli2023synthesizing,
  title = <span class="p">{</span>Synthesizing Mixed-type Electronic Health Records using Diffusion Models<span class="p">}</span>,
  author = <span class="p">{</span>Ceritli, Taha and Ghosheh, Ghadeer O. and Chauhan, Vinod Kumar and Zhu, Tingting and Creagh, Andrew P. and Clifton, David A.<span class="p">}</span>,
  doi = <span class="p">{</span>https://doi.org/10.48550/arxiv.2302.14679<span class="p">}</span>,
  url = <span class="p">{</span>https://arxiv.org/abs/2302.14679<span class="p">}</span>,
  publisher = <span class="p">{</span>arXiv<span class="p">}</span>,
  year = <span class="p">{</span>2023<span class="p">}</span>,
<span class="p">}</span>

</code></pre></div></div>

      </d-article>

      <d-appendix>
        <d-footnote-list></d-footnote-list>
        <d-citation-list></d-citation-list>
      </d-appendix>

      <d-bibliography src="/assets/bibliography/"></d-bibliography>
    </div>

    <!-- Footer -->
    <footer class="fixed-bottom">
      <div class="container mt-0">
        Â© Copyright 2023 Andrew P. Creagh. Powered by <a href="http://jekyllrb.com/" target="_blank" rel="noopener noreferrer">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" target="_blank" rel="noopener noreferrer">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="noopener noreferrer">GitHub Pages</a>.

      </div>
    </footer>

    <!-- Bootsrap & MDB scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script>
    
    
  </body>
</html>
